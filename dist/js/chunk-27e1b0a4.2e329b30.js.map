{"version":3,"sources":["webpack:///./src/views/massage/massage.vue?2f7a","webpack:///src/views/massage/massage.vue","webpack:///./src/views/massage/massage.vue?f132","webpack:///./src/views/massage/massage.vue","webpack:///./src/views/massage/massageTest.vue?e3fa","webpack:///./src/views/massage/massageTest.vue?6ec4","webpack:///src/views/massage/massageTest.vue","webpack:///./src/views/massage/massageTest.vue?cbc1","webpack:///./src/views/massage/massageTest.vue?51b0","webpack:///../../../src/components/VTextarea/VTextarea.ts"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","onlineUsers","length","_l","chat","key","title","friendImg","domProps","_s","friendName","on","$event","getSpecificChat","chatId","_v","staticClass","_e","staticRenderFns","name","components","mounted","socket","$store","getters","getUser","emit","i","friendId","img","_id","data","recent","allRecentUser","methods","console","log","id","computed","watch","val","component","VApp","VBtn","VCol","VContainer","VDivider","VIcon","VImg","VList","VListItem","VListItemAvatar","VListItemContent","VListItemTitle","VRow","overlay","theAnotherUser2","staticStyle","hideMsg","item","sender","Date","timeStamp","getHours","getMinutes","user","content","sendMessage","model","value","callback","$$v","messsage","expression","props","items","allmsgs","theAnotherUser","anotherFriendId","getFriendId","users","chatIdfromanother","commit","playSound","sound","audio","Audio","play","showLastMsg","box","scrollTop","sd","updated","VCard","VListItemSubtitle","VOverlay","VProgressCircular","VTextarea","baseMixins","autoGrow","noResize","rowHeight","type","Number","default","validator","v","isNaN","parseFloat","rows","parseInt","classes","noResizeHandle","lazyValue","$nextTick","setTimeout","calculateInputHeight","input","$refs","height","minHeight","Math","genInput","onInput","onKeyDown","isFocused","e"],"mappings":"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","file":"js/chunk-27e1b0a4.2e329b30.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('v-container',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[(_vm.onlineUsers.length >0)?_c('v-list',_vm._l((_vm.onlineUsers),function(chat){return _c('v-list-item',{key:chat.title},[_c('v-list-item-avatar',[_c('v-img',{attrs:{\"alt\":((chat.friendImg) + \" avatar\"),\"src\":chat.friendImg}})],1),_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(chat.friendName)}})],1),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.getSpecificChat(chat.chatId)}}},[_c('v-icon',{attrs:{\"color\":\"deep-purple accent-4'\"}},[_vm._v(\"mdi-message-outline\")])],1)],1)}),1):_c('div',{staticClass:\"text-capitalize font-weight-bold text-center\"},[_c('h4',[_vm._v(\"there is no online users\")])]),_c('v-divider',{staticClass:\"pink my-4\"}),(_vm.chatId)?_c('div',[_c('h2',[_vm._v(\"chat\")]),_c('app-message',{attrs:{\"chatIdfromanother\":_vm.chatId}})],1):_vm._e()],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-app>\r\n    <v-container>\r\n      <v-row>\r\n        <v-col cols=\"12\" >\r\n          <v-list v-if=\"onlineUsers.length >0\">\r\n            <v-list-item v-for=\"chat in onlineUsers\" :key=\"chat.title\">\r\n              <v-list-item-avatar>\r\n                <v-img :alt=\"`${chat.friendImg} avatar`\" :src=\"chat.friendImg\"></v-img>\r\n              </v-list-item-avatar>\r\n\r\n              <v-list-item-content>\r\n                <v-list-item-title v-text=\"chat.friendName\"></v-list-item-title>\r\n              </v-list-item-content>\r\n              \r\n              <v-btn  @click=\"getSpecificChat(chat.chatId)\" icon>\r\n                <v-icon color=\"deep-purple accent-4'\">mdi-message-outline</v-icon>\r\n              </v-btn>\r\n            </v-list-item>\r\n          </v-list>\r\n          <div v-else class=\"text-capitalize font-weight-bold text-center\">\r\n            <h4>there is no online users</h4>\r\n          </div>\r\n    <v-divider class=\"pink my-4\"></v-divider>\r\n\r\n          <div v-if=\"chatId\">\r\n          <h2>chat</h2>\r\n          <app-message :chatIdfromanother=\"chatId\" ></app-message>\r\n          </div>\r\n        </v-col>\r\n\r\n      </v-row>\r\n    </v-container>\r\n\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\nimport socktConnect from \"socket.io-client\";\r\nimport message from './massageTest'\r\nexport default {\r\n  name: \"message\",\r\n  components:{\r\n    'app-message':message\r\n  },\r\n\r\n  mounted() {\r\n    this.socket = socktConnect(\"https://facebook-clones.herokuapp.com/\");\r\n    if (this.$store.getters.getUser) {\r\n      this.socket.emit(\"goOnlineTwo\", this.$store.getters.getUser);\r\n    }\r\n    this.socket.on(\"currentOnlineFriendsTwo\", (data) => {\r\n      let t = data.map((i) => {\r\n        return {\r\n          chatId: i.chatId,\r\n          friendName: i.friendId.name,\r\n          friendImg: i.friendId.img,\r\n          friendId: i.friendId._id,\r\n        };\r\n      });\r\n      this.$store.commit(\"onlineUsers\", t);\r\n      this.recent = t;\r\n    });\r\n  },\r\n  data() {\r\n    return {\r\n      socket: \"\",\r\n      recent: [],\r\n      allRecentUser: \"\",\r\n      chatId:''\r\n    };\r\n  },\r\n  methods: {\r\n    getSpecificChat(id){\r\n      console.log('work');\r\n      this.chatId = id\r\n    }\r\n  },\r\n  computed: {\r\n    onlineUsers() {\r\n      return this.$store.getters.onlineUsers;\r\n    },\r\n  },\r\n  watch: {\r\n    recent(val) {\r\n      console.log(\"changed\");\r\n      console.log(val);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./massage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./massage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./massage.vue?vue&type=template&id=37e4d624&scoped=true&\"\nimport script from \"./massage.vue?vue&type=script&lang=js&\"\nexport * from \"./massage.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"37e4d624\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VApp,VBtn,VCol,VContainer,VDivider,VIcon,VImg,VList,VListItem,VListItemAvatar,VListItemContent,VListItemTitle,VRow})\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./massageTest.vue?vue&type=style&index=0&id=e520ed54&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{},[_c('v-overlay',{attrs:{\"value\":_vm.overlay}},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"size\":\"64\"}})],1),(!_vm.overlay)?_c('v-card',[_c('div',[_c('v-list',{staticClass:\"theListDiv grey lighten-5 pt-0 pb-0\",attrs:{\"one-line\":\"\"}},[_c('v-list-item',[_c('v-list-item-avatar',[_c('v-img',{attrs:{\"src\":_vm.theAnotherUser2.img}})],1),_c('v-list-item-content',{staticClass:\"pt-0\"},[_c('v-list-item-subtitle',{staticClass:\"text-h6 black--text font-weight-bold text-capitalize\"},[_vm._v(\" \"+_vm._s(_vm.theAnotherUser2.name)+\" \"),_c('v-btn',{staticStyle:{\"position\":\"absolute\",\"right\":\"4px\",\"top\":\"8px\"},attrs:{\"small\":\"\",\"icon\":\"\"},on:{\"click\":_vm.hideMsg}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1)],1)],1)],1)],1),_c('div',{staticClass:\"mx-auto\",staticStyle:{\"overflow-y\":\"scroll\",\"max-height\":\"220px\",\"min-height\":\"219px\"},attrs:{\"id\":\"theCard\"}},[_c('div',{staticClass:\"demo-content\"},_vm._l((_vm.items),function(item){return _c('div',{key:item._id,staticClass:\"theMainOne\",staticStyle:{\"max-height\":\"520px\",\"min-height\":\"40px\"}},[_c('v-list',{staticClass:\"theListDiv pt-0 pb-0\",staticStyle:{\"max-height\":\"520px\",\"min-height\":\"40px\"},attrs:{\"three-line\":\"\"}},[_c('v-list-item',{key:item.sender.name},[_c('v-list-item-avatar',{staticClass:\"mr-2 mt-5\",attrs:{\"size\":\"35\"}},[_c('v-img',{attrs:{\"src\":item.sender.img}})],1),_c('v-list-item-content',{staticClass:\"px-1 py-0 mb-1\",attrs:{\"title\":new Date(+item.timeStamp).getHours() + ':'+ new Date(+item.timeStamp).getMinutes()}},[_c('v-textarea',{staticClass:\"pink\",attrs:{\"auto-grow\":\"\",\"background-color\":item.sender._id !==_vm.user._id? 'light-blue ':'white',\"color\":item.sender._id !==_vm.user._id? 'white ':'black',\"hide-details\":\"\",\"rows\":\"1\",\"solo\":\"\",\"row-height\":\"15\",\"value\":item.content}})],1)],1)],1)],1)}),0)]),_c('div',{staticClass:\"theInput mt-3 pa-3  mb-0\"},[_c('app-emoji',{attrs:{\"sendMessage\":_vm.sendMessage},model:{value:(_vm.messsage),callback:function ($$v) {_vm.messsage=$$v},expression:\"messsage\"}})],1)]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template >\r\n  <div class>\r\n    <v-overlay :value=\"overlay\">\r\n      <v-progress-circular indeterminate size=\"64\"></v-progress-circular>\r\n    </v-overlay>\r\n    <v-card v-if=\"!overlay\">\r\n      <!-- dettails user in top of the conversation -->\r\n      <div>\r\n        <v-list one-line class=\"theListDiv grey lighten-5 pt-0 pb-0\">\r\n          <v-list-item>\r\n            <v-list-item-avatar>\r\n              <v-img :src=\"theAnotherUser2.img\"></v-img>\r\n            </v-list-item-avatar>\r\n            <v-list-item-content class=\"pt-0\">\r\n              <v-list-item-subtitle class=\"text-h6 black--text font-weight-bold text-capitalize\">\r\n                {{theAnotherUser2.name}}\r\n                <v-btn @click=\"hideMsg\" style=\" position: absolute;right: 4px;top: 8px;\" small icon>\r\n                  <v-icon>mdi-close</v-icon>\r\n                </v-btn>\r\n              </v-list-item-subtitle>\r\n            </v-list-item-content>\r\n          </v-list-item>\r\n        </v-list>\r\n      </div>\r\n      <!--  end dettails user in top of the conversation -->\r\n\r\n      <!-- the masswges -->\r\n      <div\r\n        style=\" overflow-y: scroll; max-height:220px; min-height:219px\"\r\n        id=\"theCard\"\r\n        class=\"mx-auto\"\r\n      >\r\n        <div class=\"demo-content\">\r\n          <div\r\n            v-for=\"item in items\"\r\n            :key=\"item._id\"\r\n            style=\" max-height:520px; min-height:40px\"\r\n            class=\"theMainOne\"\r\n          >\r\n            <v-list\r\n              three-line\r\n              class=\"theListDiv pt-0 pb-0\"\r\n              style=\" max-height:520px; min-height:40px\"\r\n            >\r\n              <v-list-item :key=\"item.sender.name\">\r\n                <v-list-item-avatar size=\"35\" class=\"mr-2 mt-5\">\r\n                  <v-img :src=\"item.sender.img\"></v-img>\r\n                </v-list-item-avatar>\r\n\r\n                <v-list-item-content\r\n                  class=\"px-1 py-0 mb-1\"\r\n                  :title=\"new Date(+item.timeStamp).getHours() + ':'+ new Date(+item.timeStamp).getMinutes()\"\r\n                >\r\n                  <v-textarea\r\n                    auto-grow\r\n                    :background-color=\"item.sender._id !==user._id? 'light-blue ':'white'\"\r\n                    :color=\"item.sender._id !==user._id? 'white ':'black'\"\r\n                    hide-details\r\n                    class=\"pink\"\r\n                    rows=\"1\"\r\n                    solo\r\n                    row-height=\"15\"\r\n                    :value=\"item.content\"\r\n                  ></v-textarea>\r\n                </v-list-item-content>\r\n              </v-list-item>\r\n            </v-list>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- input to send messages -->\r\n      <div class=\"theInput mt-3 pa-3  mb-0\">\r\n        <app-emoji v-model=\"messsage\" :sendMessage=\"sendMessage\"></app-emoji>\r\n      </div>\r\n    </v-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Functions from \"../../../server/api\";\r\nimport socktConnect from \"socket.io-client\";\r\nimport emojiPickerVue from '../post/emojiPicker.vue';\r\n\r\nexport default {\r\n  name: \"messageroom\",\r\n  props: [\"chatIdfromanother\"],\r\n  components:{\r\n    'app-emoji':emojiPickerVue\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      // chatId: this.chatIdfromanother ||this.$route.params.id,\r\n      items: [],\r\n      messsage: \"\",\r\n      allmsgs: [],\r\n      theAnotherUser: \"\",\r\n      theAnotherUser2: \"\",\r\n    };\r\n  },\r\n  computed: {\r\n    user() {\r\n      return this.$store.getters.getUser;\r\n    },\r\n    anotherFriendId() {\r\n      return this.$store.getters.getFriendId;\r\n    },\r\n    users() {\r\n      return this.$store.getters.users;\r\n    },\r\n    chatId() {\r\n      return this.chatIdfromanother\r\n        ? this.chatIdfromanother\r\n        : this.$route.params.id;\r\n    },\r\n  },\r\n  methods: {\r\n    hideMsg() {\r\n      this.$store.commit(\"hideMsg\", false);\r\n    },\r\n    async sendMessage() {\r\n      try {\r\n        const messageData = {\r\n          content: this.messsage,\r\n          chatId: this.chatId,\r\n          sender: {\r\n            _id: this.user._id,\r\n            name: this.user.name,\r\n            img: this.user.img,\r\n            email: this.user.email,\r\n          },\r\n          friendId: this.theAnotherUser || this.anotherFriendId,\r\n          timeStamp: Date.now(),\r\n        };\r\n        this.socket.emit(\"joinnotificationsRoom\", this.$store.getters.getUser);\r\n        this.socket.emit(\"sendMessage\", messageData);\r\n        let pushMsgtoMineStore = {\r\n          content: this.messsage,\r\n          chatId: this.chatId,\r\n          senderId: this.user._id,\r\n          senderImg: this.theAnotherUser2.img,\r\n          senderName: this.theAnotherUser2.name,\r\n          date: Date.now(),\r\n        };\r\n        this.$store.commit(\"pushNewMessage\", pushMsgtoMineStore);\r\n        this.items.push(messageData);\r\n        this.messsage = \"\";\r\n        this.showLastMsg();\r\n      } catch (error) {\r\n        this.errors=error\r\n      }\r\n    },\r\n  \r\n    playSound(sound) {\r\n      if (sound) {\r\n        var audio = new Audio(sound);\r\n        audio.play();\r\n      }\r\n    },\r\n    showLastMsg() {\r\n      let box = document.getElementById(\"theCard\");\r\n      console.log(box);\r\n      let sd = box.scrollHeight + 30;\r\n      box.scrollTop = sd;\r\n    },\r\n  },\r\n  watch: {\r\n    chatIdfromanother() {\r\n      Functions.getMessage(this.chatId).then((res) => {\r\n        this.items = res.data.chat;\r\n      });\r\n    },\r\n  },\r\n  updated() {\r\n    this.showLastMsg();\r\n  },\r\n  async mounted() {\r\n    try {\r\n      // this.overlay = true;\r\n      const res = await Functions.getMessage(this.chatId);\r\n      console.log(res);\r\n      const addTOArr = Object.values(res.data.ChatDetails.users);\r\n      this.items = res.data.chat;\r\n      this.theAnotherUser = addTOArr.find((i) => {\r\n        return i !== this.user._id;\r\n      });\r\n      console.log(this.theAnotherUser);\r\n      this.theAnotherUser2 = this.users.find((i) => {\r\n        return i._id == this.theAnotherUser;\r\n      });\r\n      console.log(this.theAnotherUser2);\r\n      this.overlay = false;\r\n      this.socket = socktConnect(\"https://facebook-clones.herokuapp.com/\");\r\n      this.socket.emit(\"JoinChat\", this.chatId);\r\n      this.socket.on(\"newMessage\", (data) => {\r\n        console.log(\"new msg\");\r\n        this.playSound(\r\n          \"http://soundbible.com/mp3/Air Plane Ding-SoundBible.com-496729130.mp3\"\r\n        );\r\n        let edittheMsg = {\r\n          chatId: data.chatId,\r\n          timeStamp: Date.now(),\r\n          sender: data.sender,\r\n          content: data.content,\r\n        };\r\n        let pushMsg = {\r\n          chatId: data.chatId,\r\n          content: data.content,\r\n          senderImg: data.sender.img,\r\n          senderName: data.sender.name,\r\n          senderId: data.sender._id,\r\n          date: Date.now(),\r\n        };\r\n        this.$store.commit(\"pushNewMessage\", pushMsg);\r\n        this.items.push(edittheMsg);\r\n        this.showLastMsg();\r\n      });\r\n      this.socket.on(\"newMsgFromUrFriend\", (data) => {\r\n        this.playSound(\r\n          \"http://soundbible.com/mp3/Air Plane Ding-SoundBible.com-496729130.mp3\"\r\n        );\r\n        let pushMsg = {\r\n          chatId: data.chatId,\r\n          content: data.content,\r\n          senderImg: data.sender.img,\r\n          senderName: data.sender.name,\r\n          senderId: data.sender._id,\r\n          date: Date.now(),\r\n        };\r\n        this.items.push(data);\r\n        this.$store.commit(\"pushNewMessage\", pushMsg);\r\n      });\r\n    } catch (error) {\r\n      console.log(error);\r\n      this.errors = error;\r\n      this.overlay = false;\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.theFirstClass {\r\n  background: #e0e0e0;\r\n  color: black !important;\r\n}\r\n.theSecondClass {\r\n  background: #00bcd4;\r\n  color: white !important;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./massageTest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./massageTest.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./massageTest.vue?vue&type=template&id=e520ed54&scoped=true&\"\nimport script from \"./massageTest.vue?vue&type=script&lang=js&\"\nexport * from \"./massageTest.vue?vue&type=script&lang=js&\"\nimport style0 from \"./massageTest.vue?vue&type=style&index=0&id=e520ed54&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e520ed54\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemAvatar } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemSubtitle } from 'vuetify/lib/components/VList';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VBtn,VCard,VIcon,VImg,VList,VListItem,VListItemAvatar,VListItemContent,VListItemSubtitle,VOverlay,VProgressCircular,VTextarea})\n","// Styles\nimport './VTextarea.sass'\n\n// Extensions\nimport VTextField from '../VTextField/VTextField'\n\n// Utilities\nimport mixins from '../../util/mixins'\n\n// Types\nimport Vue from 'vue'\n\ninterface options extends Vue {\n  $refs: {\n    input: HTMLTextAreaElement\n  }\n}\n\nconst baseMixins = mixins<options &\n  InstanceType<typeof VTextField>\n>(\n  VTextField\n)\n\n/* @vue/component */\nexport default baseMixins.extend({\n  name: 'v-textarea',\n\n  props: {\n    autoGrow: Boolean,\n    noResize: Boolean,\n    rowHeight: {\n      type: [Number, String],\n      default: 24,\n      validator: (v: any) => !isNaN(parseFloat(v)),\n    },\n    rows: {\n      type: [Number, String],\n      default: 5,\n      validator: (v: any) => !isNaN(parseInt(v, 10)),\n    },\n  },\n\n  computed: {\n    classes (): object {\n      return {\n        'v-textarea': true,\n        'v-textarea--auto-grow': this.autoGrow,\n        'v-textarea--no-resize': this.noResizeHandle,\n        ...VTextField.options.computed.classes.call(this),\n      }\n    },\n    noResizeHandle (): boolean {\n      return this.noResize || this.autoGrow\n    },\n  },\n\n  watch: {\n    lazyValue () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n    rowHeight () {\n      this.autoGrow && this.$nextTick(this.calculateInputHeight)\n    },\n  },\n\n  mounted () {\n    setTimeout(() => {\n      this.autoGrow && this.calculateInputHeight()\n    }, 0)\n  },\n\n  methods: {\n    calculateInputHeight () {\n      const input = this.$refs.input\n      if (!input) return\n\n      input.style.height = '0'\n      const height = input.scrollHeight\n      const minHeight = parseInt(this.rows, 10) * parseFloat(this.rowHeight)\n      // This has to be done ASAP, waiting for Vue\n      // to update the DOM causes ugly layout jumping\n      input.style.height = Math.max(minHeight, height) + 'px'\n    },\n    genInput () {\n      const input = VTextField.options.methods.genInput.call(this)\n\n      input.tag = 'textarea'\n      delete input.data!.attrs!.type\n      input.data!.attrs!.rows = this.rows\n\n      return input\n    },\n    onInput (e: Event) {\n      VTextField.options.methods.onInput.call(this, e)\n      this.autoGrow && this.calculateInputHeight()\n    },\n    onKeyDown (e: KeyboardEvent) {\n      // Prevents closing of a\n      // dialog when pressing\n      // enter\n      if (this.isFocused && e.keyCode === 13) {\n        e.stopPropagation()\n      }\n\n      this.$emit('keydown', e)\n    },\n  },\n})\n"],"sourceRoot":""}