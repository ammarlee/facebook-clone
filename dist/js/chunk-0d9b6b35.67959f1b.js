(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d9b6b35","chunk-3be9ff71"],{1681:function(t,e,s){},3267:function(t,e,s){"use strict";s("ccee")},"41a8":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{},[s("v-overlay",{attrs:{value:t.overlay}},[s("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),t.overlay?t._e():s("v-card",[s("div",[s("v-list",{staticClass:"theListDiv grey lighten-5 pt-0 pb-0",attrs:{"one-line":""}},[s("v-list-item",[s("v-list-item-avatar",[s("v-img",{attrs:{src:t.theAnotherUser2.img}})],1),s("v-list-item-content",{staticClass:"pt-0"},[s("v-list-item-subtitle",{staticClass:"text-h6 black--text font-weight-bold text-capitalize"},[t._v(" "+t._s(t.theAnotherUser2.name)+" "),s("v-btn",{staticStyle:{position:"absolute",right:"4px",top:"8px"},attrs:{small:"",icon:""},on:{click:t.hideMsg}},[s("v-icon",[t._v("mdi-close")])],1)],1)],1)],1)],1)],1),s("div",{staticClass:"mx-auto",staticStyle:{"overflow-y":"scroll","max-height":"220px","min-height":"219px"},attrs:{id:"theCard"}},[s("div",{staticClass:"demo-content"},t._l(t.items,(function(e){return s("div",{key:e._id,staticClass:"theMainOne",staticStyle:{"max-height":"520px","min-height":"40px"}},[s("v-list",{staticClass:"theListDiv pt-0 pb-0",staticStyle:{"max-height":"520px","min-height":"40px"},attrs:{"three-line":""}},[s("v-list-item",{key:e.sender.name},[s("v-list-item-avatar",{staticClass:"mr-2 mt-5",attrs:{size:"35"}},[s("v-img",{attrs:{src:e.sender.img}})],1),s("v-list-item-content",{staticClass:"px-1 py-0 mb-1",attrs:{title:new Date(+e.timeStamp).getHours()+":"+new Date(+e.timeStamp).getMinutes()}},[s("v-textarea",{staticClass:"pink",attrs:{"auto-grow":"","background-color":e.sender._id!==t.user._id?"light-blue ":"white",color:e.sender._id!==t.user._id?"white ":"black","hide-details":"",rows:"1",solo:"","row-height":"15",value:e.content}})],1)],1)],1)],1)})),0)]),s("div",{staticClass:"theInput mt-3 pa-3  mb-0"},[s("app-emoji",{attrs:{sendMessage:t.sendMessage},model:{value:t.messsage,callback:function(e){t.messsage=e},expression:"messsage"}})],1)])],1)},n=[],a=(s("7db0"),s("b0c0"),s("07ac"),s("96cf"),s("1da1")),o=s("7695"),r=s("8e27"),c=s.n(r),l=s("be62"),d={name:"messageroom",props:["chatIdfromanother"],components:{"app-emoji":l["a"]},data:function(){return{items:[],messsage:"",allmsgs:[],theAnotherUser:"",theAnotherUser2:""}},computed:{user:function(){return this.$store.getters.getUser},anotherFriendId:function(){return this.$store.getters.getFriendId},users:function(){return this.$store.getters.users},chatId:function(){return this.chatIdfromanother?this.chatIdfromanother:this.$route.params.id}},methods:{hideMsg:function(){this.$store.commit("hideMsg",!1)},sendMessage:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{s={content:t.messsage,chatId:t.chatId,sender:{_id:t.user._id,name:t.user.name,img:t.user.img,email:t.user.email},friendId:t.theAnotherUser||t.anotherFriendId,timeStamp:Date.now()},t.socket.emit("joinnotificationsRoom",t.$store.getters.getUser),t.socket.emit("sendMessage",s),i={content:t.messsage,chatId:t.chatId,senderId:t.user._id,senderImg:t.theAnotherUser2.img,senderName:t.theAnotherUser2.name,date:Date.now()},t.$store.commit("pushNewMessage",i),t.items.push(s),t.messsage="",t.showLastMsg()}catch(n){t.errors=n}case 1:case"end":return e.stop()}}),e)})))()},playSound:function(t){if(t){var e=new Audio(t);e.play()}},showLastMsg:function(){var t=document.getElementById("theCard");console.log(t);var e=t.scrollHeight+30;t.scrollTop=e}},watch:{chatIdfromanother:function(){var t=this;o["a"].getMessage(this.chatId).then((function(e){t.items=e.data.chat}))}},updated:function(){this.showLastMsg()},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o["a"].getMessage(t.chatId);case 3:s=e.sent,console.log(s),i=Object.values(s.data.ChatDetails.users),t.items=s.data.chat,t.theAnotherUser=i.find((function(e){return e!==t.user._id})),console.log(t.theAnotherUser),t.theAnotherUser2=t.users.find((function(e){return e._id==t.theAnotherUser})),console.log(t.theAnotherUser2),t.overlay=!1,t.socket=c()("https://facebook-clones.herokuapp.com/"),t.socket.emit("JoinChat",t.chatId),t.socket.on("newMessage",(function(e){console.log("new msg"),t.playSound("http://soundbible.com/mp3/Air Plane Ding-SoundBible.com-496729130.mp3");var s={chatId:e.chatId,timeStamp:Date.now(),sender:e.sender,content:e.content},i={chatId:e.chatId,content:e.content,senderImg:e.sender.img,senderName:e.sender.name,senderId:e.sender._id,date:Date.now()};t.$store.commit("pushNewMessage",i),t.items.push(s),t.showLastMsg()})),t.socket.on("newMsgFromUrFriend",(function(e){t.playSound("http://soundbible.com/mp3/Air Plane Ding-SoundBible.com-496729130.mp3");var s={chatId:e.chatId,content:e.content,senderImg:e.sender.img,senderName:e.sender.name,senderId:e.sender._id,date:Date.now()};t.items.push(e),t.$store.commit("pushNewMessage",s)})),e.next=23;break;case 18:e.prev=18,e.t0=e["catch"](0),console.log(e.t0),t.errors=e.t0,t.overlay=!1;case 23:case"end":return e.stop()}}),e,null,[[0,18]])})))()}},u=d,m=(s("3267"),s("2877")),h=s("6544"),p=s.n(h),g=s("8336"),v=s("b0af"),f=s("132d"),w=s("adda"),b=s("8860"),I=s("da13"),k=s("8270"),x=s("5d23"),C=s("a797"),y=s("490a"),_=s("a844"),V=Object(m["a"])(u,i,n,!1,null,"e520ed54",null);e["default"]=V.exports;p()(V,{VBtn:g["a"],VCard:v["a"],VIcon:f["a"],VImg:w["a"],VList:b["a"],VListItem:I["a"],VListItemAvatar:k["a"],VListItemContent:x["a"],VListItemSubtitle:x["b"],VOverlay:C["a"],VProgressCircular:y["a"],VTextarea:_["a"]})},"63c7":function(t,e,s){"use strict";s("777b")},"777b":function(t,e,s){},"81a7":function(t,e,s){"use strict";s("f57e")},a844:function(t,e,s){"use strict";s("a9e3");var i=s("5530"),n=(s("1681"),s("8654")),a=s("58df"),o=Object(a["a"])(n["a"]);e["a"]=o.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object(i["a"])({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},n["a"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height="0";var e=t.scrollHeight,s=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(s,e)+"px"}},genInput:function(){var t=n["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){n["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})},b660:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rounded-lg mb-10",attrs:{id:"mainDiv"}},[s("v-list",{staticClass:"rounded-lg",attrs:{"one-line":""}},[s("v-list-item",[s("v-list-item-avatar",{staticStyle:{cursor:"pointer"},on:{click:t.navigateToProfile}},[s("v-img",{attrs:{src:t.user.img}})],1),t.overlay?s("v-overlay",{attrs:{value:t.overlay}},[s("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1):t._e(),s("v-dialog",{staticClass:"ma-0",attrs:{"e-else":"","max-width":600},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[s("v-btn",t._g(t._b({staticClass:"rounded-lg text-capitalize",staticStyle:{background:"#dfdfdf!important",color:"black"},attrs:{color:"pink lighten-2",dark:"",id:"theBtn"}},"v-btn",n,!1),i),[s("v-icon",{staticClass:"pink--text"},[t._v("mdi-pencil")]),t._v(" what is in yor mind "+t._s(t.user.name)+" ")],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[s("v-card",[s("v-card-title",{staticClass:"headline justify-start text-center text-capitalize grey lighten-2"},[t._v("Create new post")]),s("v-divider"),s("div",{staticClass:"ml-2 container"},[s("div",[s("v-list",{staticClass:"pt-0 pb-0",attrs:{"one-line":""}},[s("v-list-item",[s("v-list-item-avatar",[s("v-img",{attrs:{src:t.user.img}})],1),s("v-list-item-content",{staticClass:"pt-0"},[s("v-list-item-subtitle",{staticClass:"text-h6 font-weight-bold text-capitalize"},[t._v(t._s(t.user.name))])],1)],1)],1)],1),s("div",[s("textarea-emoji-picker",{model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),s("div",{staticClass:"features mt-2"},[s("v-btn",{staticClass:"text-capitalize",on:{click:t.refs}},[t._v(" add to your post "),s("v-icon",{staticClass:"ml-2"},[t._v("mdi-camera")])],1),s("input",{ref:"uploading",staticClass:"d-none",attrs:{type:"file",multiple:""},on:{change:t.uploadFile}})],1)]),s("v-card-actions",{staticClass:"justify-end"},[s("v-btn",{attrs:{text:"",color:"red"},on:{click:t.creatPost}},[t._v("post")])],1)],1)],1)],1)],1)],1)},n=[],a=(s("a4d3"),s("e01a"),s("b64b"),s("96cf"),s("1da1")),o=s("7695"),r=s("be62"),c={components:{TextareaEmojiPicker:r["a"]},data:function(){return{text:"",dialog:!1,description:" ",pic:[]}},methods:{clearInputs:function(){this.dialog=!1,this.overlay=!1,this.pic=[],this.description=" "},navigateToProfile:function(){this.$router.push("/profile/"+this.user._id)},refs:function(){this.$refs.uploading.click()},uploadFile:function(t){this.pic=t.target.files},creatPost:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var s,i,n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(s={description:t.description,userId:t.user._id},i=new FormData,n=0,a=Object.keys(t.pic);n<a.length;n++)r=a[n],i.append("files",t.pic[r]);return i.append("data",JSON.stringify(s)),e.prev=4,t.dialog=!1,t.overlay=!0,e.next=9,o["a"].createPost(i);case 9:t.clearInputs(),t.sweetAlert("success","added new post ","3000","bottom-end"),e.next=17;break;case 13:e.prev=13,e.t0=e["catch"](4),t.overlay=!1,t.errors=e.t0;case 17:case"end":return e.stop()}}),e,null,[[4,13]])})))()}},computed:{user:function(){return this.$store.getters.getUser}}},l=c,d=(s("81a7"),s("2877")),u=s("6544"),m=s.n(u),h=s("8336"),p=s("b0af"),g=s("99d9"),v=s("169a"),f=s("ce7e"),w=s("132d"),b=s("adda"),I=s("8860"),k=s("da13"),x=s("8270"),C=s("5d23"),y=s("a797"),_=s("490a"),V=Object(d["a"])(l,i,n,!1,null,"1215ad1f",null);e["a"]=V.exports;m()(V,{VBtn:h["a"],VCard:p["a"],VCardActions:g["a"],VCardTitle:g["c"],VDialog:v["a"],VDivider:f["a"],VIcon:w["a"],VImg:b["a"],VList:I["a"],VListItem:k["a"],VListItemAvatar:x["a"],VListItemContent:C["a"],VListItemSubtitle:C["b"],VOverlay:y["a"],VProgressCircular:_["a"]})},bb51:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home",attrs:{id:"theMainHome"}},[s("v-overlay",{attrs:{value:t.overlay}},[s("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1),s("v-app",[t.currentUser?s("v-main",{staticClass:"grey lighten-3"},[s("v-container",{attrs:{id:"inspire",fluid:""}},[s("v-row",[s("v-col",{staticClass:"d-none d-sm-block rounded-lg",attrs:{cols:"12",sm:"3"}},[s("v-sheet",{attrs:{rounded:"lg","min-height":"268"}},[s("router-link",{attrs:{to:"/profile/"+t.user._id,tag:"div"}},[s("v-list",{staticClass:"pb-0",staticStyle:{cursor:"pointer"},attrs:{"two-line":""}},[[s("v-list-item",[s("v-list-item-avatar",[s("v-img",{attrs:{src:t.user.img}})],1),s("v-list-item-content",[s("v-list-item-title",{staticClass:"text-capitalize font-weight-bold",domProps:{innerHTML:t._s(t.user.name)}})],1)],1)]],2)],1),s("app-links")],1)],1),s("app-content"),s("v-col",{staticClass:"d-none d-sm-block",attrs:{cols:"12",sm:"3"}},[s("v-sheet",{attrs:{rounded:"lg",height:"268"}},[s("router-link",{staticClass:"text-capitalize pt-3=2 text-center",attrs:{to:"/massage",tag:"h3"}},[t._v("online")]),s("app-onlineUsers")],1)],1),t.hideMsg?s("app-chatting",{style:{top:t.$screen.height-390+"px"},attrs:{id:"theChatBox",chatIdfromanother:t.getChatId}}):t._e()],1)],1)],1):t._e()],1)],1)},n=[],a=(s("b0c0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.currentUser?s("v-col",{attrs:{cols:"12",sm:"6"}},[s("app-new-post"),t._l(t.posts,(function(t,e){return s("app-all-posts",{key:e,attrs:{post:t,heights:"270",id:"div"+t._id}},[s("div",{attrs:{slot:"options"},slot:"options"},[s("app-options",{attrs:{post:t}})],1)])})),t.posts.length<=0?s("div",{staticClass:"text-center"},[s("span",{staticClass:"pink--text text-h5 mr-2 text-capitalize"},[t._v("there is no posts ")])]):t._e()],2):t._e()}),o=[],r=s("b660"),c=s("1876"),l=s("b0d7"),d={name:"conetent",components:{"app-new-post":r["a"],"app-all-posts":c["a"],"app-options":l["a"]},data:function(){return{dialog:!1,videoId:"videoId",rout:this.$route.name,showPostcomments:!1,items:null,dialogData:{id:"",description:"",img:[]}}},computed:{user:function(){return this.$store.getters.getUser},posts:function(){return this.$store.getters.posts}},methods:{details:function(t){this.$router.push("/details/"+t)}}},u=d,m=s("2877"),h=s("6544"),p=s.n(h),g=s("62ad"),v=Object(m["a"])(u,a,o,!1,null,null,null),f=v.exports;p()(v,{VCol:g["a"]});var w=s("8e27"),b=s.n(w),I=s("7695"),k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[t.onlineUsers.length>0?s("v-list",t._l(t.onlineUsers,(function(e){return s("v-list-item",{key:e.title},[s("v-list-item-avatar",[s("v-img",{attrs:{alt:e.friendImg+" avatar",src:e.friendImg}})],1),s("v-list-item-content",[s("v-list-item-title",{domProps:{textContent:t._s(e.friendName)}})],1),s("v-btn",{attrs:{icon:""},on:{click:function(s){return t.getSpecificChat(e.chatId)}}},[s("v-icon",{attrs:{color:"deep-purple accent-4'"}},[t._v("mdi-message-outline")])],1)],1)})),1):s("div",[s("h4",{staticClass:"text-capitalize pink--text"},[t._v("there is no online users")])])],1)],1)],1)],1)},x=[],C=(s("d81d"),{name:"onlineusers",mounted:function(){var t=this;this.socket=b()("https://facebook-clones.herokuapp.com/"),this.$store.getters.getUser&&this.socket.emit("goOnlineTwo",this.$store.getters.getUser),this.socket.on("currentOnlineFriendsTwo",(function(e){var s=e.map((function(t){return{chatId:t.chatId,friendName:t.friendId.name,friendImg:t.friendId.img,friendId:t.friendId._id}}));t.$store.commit("onlineUsers",s),t.recent=s}))},data:function(){return{socket:"",recent:[],allRecentUser:"",chatId:""}},methods:{getSpecificChat:function(t){this.chatId=t,this.$store.commit("sendChatId",t),this.$store.commit("hideMsg",!0)}},computed:{onlineUsers:function(){return this.$store.getters.onlineUsers}}}),y=C,_=s("8336"),V=s("a523"),$=s("132d"),U=s("adda"),S=s("8860"),A=s("da13"),L=s("8270"),M=s("5d23"),N=s("0fd9"),z=Object(m["a"])(y,k,x,!1,null,"151acf92",null),D=z.exports;p()(z,{VBtn:_["a"],VCol:g["a"],VContainer:V["a"],VIcon:$["a"],VImg:U["a"],VList:S["a"],VListItem:A["a"],VListItemAvatar:L["a"],VListItemContent:M["a"],VListItemTitle:M["c"],VRow:N["a"]});var H=s("41a8"),P={name:"Home",components:{"app-content":f,"app-onlineUsers":D,"app-chatting":H["default"]},data:function(){return{socket:"",thePosition:""}},mounted:function(){var t=this;if(this.user)this.socket=b()("https://facebook-clones.herokuapp.com/"),this.socket.emit("joinnotificationsRoom",this.$store.getters.getUser),this.socket.on("newMsgFromUrFriend",(function(e){t.playSound("http://soundbible.com/mp3/Air Plane Ding-SoundBible.com-496729130.mp3");var s={chatId:e.chatId,content:e.content,senderImg:e.sender.img,senderName:e.sender.name,senderId:e.sender._id,date:Date.now()};t.$store.commit("pushNewMessage",s)})),this.socket.on("newLikeNotification",(function(e){console.log("home page notification for like"),t.addTheNotification(e),t.playSound("http://soundbible.com/mp3/Air Plane Ding-SoundBible.com-496729130.mp3")})),this.socket.on("newCommentNotification",(function(e){console.log("home page notification for comments"),t.addTheNotification(e),t.playSound("http://soundbible.com/mp3/Air Plane Ding-SoundBible.com-496729130.mp3")})),this.socket.on("newRequest",(function(e){console.log("from the home vue "),t.playSound("http://soundbible.com/mp3/Air Plane Ding-SoundBible.com-496729130.mp3");var s={user:t.$store.getters.getUser._id,action:e.action,name:e.name,userId:e.userId,friendId:e.friendId,img:e.img,msg:e.msg,date:e.date};t.$store.commit("friendRequestNotifications",s)}));else{var e=localStorage.getItem("userToken");e?I["a"].getuserWithToken(e).then((function(e){t.$store.dispatch("setUser",e.data.user),t.$store.dispatch("setAuth",e.data.authanticated),t.$store.commit("setNotifications",e.data.user.friendsNotifications),t.$store.commit("setAllNotificationsAfterLogin",e.data.user.AllNotifications),t.$store.commit("setUserMessages",e.data.user.messageNotifications)})):this.$router.push("/login")}},computed:{user:function(){return this.$store.getters.getUser},getChatId:function(){return this.$store.getters.chatId},height:function(){return window.innerHeight},hideMsg:function(){return this.$store.getters.hideMsg},getTheWidth:function(){var t="";return window.addEventListener("resize",(function(){t=window.innerHeight})),t}},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)},methods:{onResize:function(){this.thePosition=window.innerHeight-334},nag:function(){console.log(window.innerHeight),window.addEventListener("resize",(function(){return window.innerHeight}))},addTheNotification:function(t){this.sweetAlertwithImage(t.name,t.msg,t.img,"50","50","bottom-left","5000"),this.$store.commit("setAllNotifications",t)}}},j=P,T=(s("63c7"),s("7496")),O=s("f6c4"),R=s("a797"),B=s("490a"),F=s("8dd9"),E=Object(m["a"])(j,i,n,!1,null,"d5521aa0",null);e["default"]=E.exports;p()(E,{VApp:T["a"],VCol:g["a"],VContainer:V["a"],VImg:U["a"],VList:S["a"],VListItem:A["a"],VListItemAvatar:L["a"],VListItemContent:M["a"],VListItemTitle:M["c"],VMain:O["a"],VOverlay:R["a"],VProgressCircular:B["a"],VRow:N["a"],VSheet:F["a"]})},ccee:function(t,e,s){},f57e:function(t,e,s){}}]);
//# sourceMappingURL=chunk-0d9b6b35.67959f1b.js.map